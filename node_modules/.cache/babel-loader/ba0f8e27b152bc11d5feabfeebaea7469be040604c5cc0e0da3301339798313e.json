{"ast":null,"code":"import React,{useEffect,useState}from'react';import Newsitems from'./Newsitems';import Spinner from'./Spinner';import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const News=props=>{const[articles,setarticles]=useState([]);const[loading,setloading]=useState(true);const[page,setpage]=useState(1);const[totalresults,settotalresults]=useState(0);const updatenews=async()=>{props.setprogress(10);const url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=f59364c6a0f7455cbfd21c5525a058d0&page=\").concat(page,\"&pageSize=\").concat(props.pagesize);setloading(true);let data=await fetch(url);props.setprogress(30);let parseddata=await data.json();props.setprogress(70);setarticles(parseddata.articles);settotalresults(parseddata.totalresults);setloading(false);props.setprogress(100);};useEffect(()=>{updatenews();document.title=\"\".concat(props.category,\" - NewsMonkey\");},[]);const fetchMoreData=async()=>{const url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=f59364c6a0f7455cbfd21c5525a058d0&page=\").concat(page+1,\"&pageSize=\").concat(props.pagesize);setpage(page+1);setloading(true);let data=await fetch(url);let parseddata=await data.json();setloading(false);settotalresults(parseddata.totalresults);setarticles(articles.concat(parseddata.articles));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",style:{marginTop:'90px'},children:[props.title,\" from \",props.category]}),loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles.length,next:fetchMoreData,hasMore:articles.length!==totalresults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row my-3\",children:articles.map(element=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(Newsitems,{title:element.title?element.title.slice(0,50):\"No-Title\",description:element.description?element.description.slice(0,100):\"No-Description\",imageurl:element.urlToImage?element.urlToImage:\"https://images.squarespace-cdn.com/content/v1/5d2ce5f963185f0001cf1271/944adaeb-b231-4465-be12-3922f063c99b/new_monkey_4.jpg?format=750w\",newsurl:element.url,author:element.author,date:element.publishedAt,source:element.source.name})},element.url);})})})})]});};News.defaultProps={country:'in',pagesize:20,category:'general'};export default News;","map":{"version":3,"names":["React","useEffect","useState","Newsitems","Spinner","InfiniteScroll","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","News","props","articles","setarticles","loading","setloading","page","setpage","totalresults","settotalresults","updatenews","setprogress","url","concat","country","category","pagesize","data","fetch","parseddata","json","document","title","fetchMoreData","children","className","style","marginTop","dataLength","length","next","hasMore","loader","map","element","slice","description","imageurl","urlToImage","newsurl","author","date","publishedAt","source","name","defaultProps"],"sources":["D:/Desktop/jobs/Courses/Html_Css_Js (Code-With-Harry)/REACT/NewsMonkey-Website/src/components/News.js"],"sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport Newsitems from './Newsitems'\r\nimport Spinner from './Spinner';\r\nimport PropTypes from 'prop-types'\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst News=(props)=> {\r\n\r\n    const [articles,setarticles]=useState([]);\r\n    const [loading,setloading]=useState(true);\r\n    const [page,setpage]=useState(1);\r\n    const [totalresults,settotalresults]=useState(0);\r\n    \r\n    \r\n\r\n    const updatenews = async () => {\r\n        props.setprogress(10);\r\n        const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=f59364c6a0f7455cbfd21c5525a058d0&page=${page}&pageSize=${props.pagesize}`;\r\n        setloading(true);\r\n        let data = await fetch(url);\r\n        props.setprogress(30);\r\n        let parseddata = await data.json();\r\n        props.setprogress(70);\r\n        setarticles(parseddata.articles);\r\n        settotalresults(parseddata.totalresults);\r\n        setloading(false);\r\n        props.setprogress(100);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        updatenews();\r\n        document.title=`${props.category} - NewsMonkey`;\r\n    },[])\r\n\r\n\r\n    const fetchMoreData = async () => {\r\n        const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=f59364c6a0f7455cbfd21c5525a058d0&page=${page+1}&pageSize=${props.pagesize}`;\r\n        setpage(page+1);\r\n        setloading(true);\r\n        let data = await fetch(url);\r\n        let parseddata = await data.json();\r\n        setloading(false);\r\n        settotalresults(parseddata.totalresults);\r\n        setarticles(articles.concat(parseddata.articles));\r\n      };\r\n\r\n        return (\r\n            <>\r\n                <h1 className='text-center' style={{marginTop:'90px'}}>{props.title} from {props.category}</h1>\r\n                {loading && <Spinner />}\r\n                <InfiniteScroll\r\n                    dataLength={articles.length}\r\n                    next={fetchMoreData}\r\n                    hasMore={articles.length !== totalresults}\r\n                    loader={<Spinner/>}\r\n                    >\r\n                    <div className='container'>\r\n                    <div className='row my-3'>\r\n                        {articles.map((element) => {\r\n                            return <div className='col-md-4' key={element.url}>\r\n                                <Newsitems title={element.title ? element.title.slice(0, 50) : \"No-Title\"} description={element.description ? element.description.slice(0, 100) : \"No-Description\"} imageurl={element.urlToImage ? element.urlToImage : \"https://images.squarespace-cdn.com/content/v1/5d2ce5f963185f0001cf1271/944adaeb-b231-4465-be12-3922f063c99b/new_monkey_4.jpg?format=750w\"} newsurl={element.url} author={element.author} date={element.publishedAt} source={element.source.name} />\r\n                            </div>\r\n                        })}\r\n                    </div>\r\n                    </div>\r\n                </InfiniteScroll>\r\n                \r\n                {/* <div className='container d-flex justify-content-between'>\r\n                    <button disabled={page <= 1} type=\"button\" class=\"btn btn-dark\" onClick={this.handleprevious}>&larr; Previous</button>\r\n                    <button disabled={page + 1 > Math.ceil(totalresults / props.pagesize)} type=\"button\" class=\"btn btn-dark\" onClick={this.handlenext}>Next &rarr;</button>\r\n                </div> */}\r\n            </>\r\n        )\r\n}\r\n\r\nNews.defaultProps = {\r\n    country: 'in',\r\n    pagesize: 20,\r\n    category: 'general'\r\n}\r\n\r\nNews.propTypes = {\r\n    country: PropTypes.string,\r\n    pagesize: PropTypes.number,\r\n    category: PropTypes.string\r\n}\r\n\r\nexport default News;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}